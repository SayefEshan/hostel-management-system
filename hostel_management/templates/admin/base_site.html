{% extends "admin/base.html" %}
{% load static %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block branding %}
<h1 id="site-name">
    <a href="{% url 'admin:index' %}">
        <i class="fas fa-building" style="margin-right: 10px;"></i>
        Hostel Management System
        {% if user.is_authenticated and not user.is_superuser %}
            <span class="user-role">
                {% if user.groups.exists %}
                    {{ user.groups.first.name }}
                {% else %}
                    Staff
                {% endif %}
            </span>
        {% endif %}
    </a>
</h1>
{% endblock %}

{% block nav-global %}{% endblock %}

{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/admin_custom.css' %}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Add some extra styling for better visual hierarchy */
        #site-name a {
            color: white !important;
            text-decoration: none;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        #site-name i {
            color: rgba(255,255,255,0.9);
        }
        
        /* Custom welcome message */
        .welcome-msg {
            background: rgba(255,255,255,0.1);
            padding: 8px 15px;
            border-radius: 6px;
            margin-left: 20px;
            color: white;
            font-size: 0.9em;
        }
        
        /* Role-based header styling */
        .user-role {
            background: rgba(255,255,255,0.2);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .staff-notice {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        /* Enhanced user tools */
        #user-tools a:first-child::before {
            content: "\f007";
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            margin-right: 5px;
        }
        
        #user-tools a[href*="logout"]::before {
            content: "\f2f5";
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            margin-right: 5px;
        }
        
        /* Dashboard improvements */
        .dashboard .module {
            transition: transform 0.2s;
        }
        
        .dashboard .module:hover {
            transform: translateY(-2px);
        }
        
        /* Status badges */
        .status-badge {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-approved {
            background: #d4edda;
            color: #155724;
        }
        
        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-active {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
{% endblock %}

{% block extrahead %}
    {{ block.super }}
    <script>
        // Add some interactive enhancements
        document.addEventListener('DOMContentLoaded', function() {
            // Add loading states to forms
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function() {
                    const submitBtn = form.querySelector('input[type="submit"]');
                    if (submitBtn) {
                        submitBtn.style.opacity = '0.7';
                        submitBtn.value = 'Processing...';
                    }
                });
            });
            
            // Add confirmation for delete actions
            const deleteLinks = document.querySelectorAll('.deletelink');
            deleteLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    if (!confirm('Are you sure you want to delete this item? This action cannot be undone.')) {
                        e.preventDefault();
                    }
                });
            });
            
            // Enhance action dropdown
            const actionSelect = document.querySelector('select[name="action"]');
            if (actionSelect) {
                actionSelect.addEventListener('change', function() {
                    const selectedOption = this.options[this.selectedIndex];
                    if (selectedOption.value && selectedOption.text.toLowerCase().includes('delete')) {
                        const goBtn = document.querySelector('.button[title="Run the selected action"]');
                        if (goBtn) {
                            goBtn.style.background = '#dc3545';
                        }
                    }
                });
            }
        });
    </script>
{% endblock %}